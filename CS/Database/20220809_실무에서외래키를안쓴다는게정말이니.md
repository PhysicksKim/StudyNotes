foreign key의 개념에 대한 설명은 생략한다.  
  
# 의문  
테이블을 만들 때 SQL 기준으로 

```
...

FOREIGN KEY (memberId) REFERENCES member (id)
```

위와 같이 외래키를 지정해준다.  
  
근데 왜 SQL문으로 외래키를 지정해줄까?   
그냥 개념적으로 그럴 뿐이지, 외래키를 SQL문으로 지정하지 않은채로 사용해도 되지 않을까?  
  
<br>  
    
# 당연히, DBMS가 무결성 검사를 해준다  
당연하게도 외래키를 지정했는데   
REFERENCES 에서 지정한 테이블과 컬럼에 일치하는 값이 없으면  
제약 조건에 따라서 이건 안된다고 메시지를 띄울 것이다.  
  
다시말하면  
DBMS에 의해서 **참조 무결성**을 유지하기 위해 SQL문으로 외래키를 지정해주는 것이다.  
  
> ## 데이터 무결성  
> 데이터 무결성에는  
> 1. 영역 무결성 : 데이터 허용하는 값. nullable , 데이터 형식(int) 등  
> 2. 참조 무결성 : 외래키는 null 또는 참조키의 값을 가져야만 함. 참조키에 존재하지 않는 값을 가질 수 없음.   
> 3. 개체 무결성 : 테이블의 모든 행들이 유일한 식별자(키)를 가져야함    
> 이렇게 3가지가 있다  
  
<br>  
  
# 그런데! 일부러 외래키를 지정하지 않기도 한다  
실제로 흔한지는 모르겠지만  
종종 실무에서 외래키로 지정해야 할 것 같은데, 외래키라고 제약조건을 DBMS에다가 걸어두지 않는 경우가 있다고 한다.  
  
이건 성능 문제 때문이라고 한다.  
INSERT , UPDATE 가 발생하면   
앞서 말했듯 참조 무결성 여부를 확인하기 위해서 DBMS가 일일이 검사를 하게 된다.  
만약, 해당 table이 INSERT UPDATE가 매우 잦다면  
매번 무결성 여부를 DBMS가 검사하기 때문에 속도가 조금 느려질 수 밖에 없게 된다.  
그러므로 이런 특수한 경우에는 외래키를 지정하지 않는 경우도 있다고 한다.  

<br><br>  

---

### 추가 내용 

<br><br>  
   
# 기본 - 외래키 설정해라    
     
먼저 SQL 과 NoSQL 을 비교해서       
SQL을 쓰는 이유를 다시 생각해보자.     
    
SQL은 대량의 데이터를 안정적으로 저장하는 것을 우선하고,    
NoSQL 은 안정성보다는 속도나 편의나 최적화된 데이터 구조를 우선한다.    
  
이로 비추어 봤을 때  
외래키 설정 여부의 출발은 SQL의 본질을 지키는 것에 있다는 점을 알 수 있다.    
SQL은 데이터를 안정적으로 일관되게 보관하기 위해 고안된 DB라는 것이다.     
따라서 기본적으로는 외래키를 꼬박꼬박 설정해주는 게 원칙상 맞다.  
  
그게 DeadLock의 위험이 있다고 할지라도  
SQL의 최우선 가치가 일단은 DB에 저장된 데이터에 문제가 없어야 한다는 점이다.  

<br>
  
# 실상 - FM을 따르기 번거로워서 외래키를 사용하지 않음    
  
[실무에서 외래키를 사용하지 않는 이유](https://www.inflearn.com/questions/629396/%EC%8B%A4%EB%AC%B4%EC%97%90%EC%84%9C-%EC%99%B8%EB%9E%98%ED%82%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%9D%B4%EC%9C%A0%EA%B0%80-%EA%B6%81%EA%B8%88%ED%95%A9%EB%8B%88%EB%8B%A4)  
  
외래키 안쓰는 이유에 대한 많은 글을 볼 수 있고, 결국 사람들의 생각은 하나로 귀결된다.    
  
> 외래키 달면 좋은데
> FM 다 따르면 일이 안된다.
> 심지어 수동으로 테이블에 값을 넣어줄 일도 생기는데, 이럴때 외래키가 잡혀있으면 수동으로 값을 넣기 어려워진다.
> 게다가 외래키 달면 CASCADE 같이 신경쓸 부분도 추가로 생기니까 복잡하다.      
> 따라서 일단 빨리 해치우고 넘어가기 위해서 그냥 외래키 해제하게 된다.  
  
이게 맞냐 저게 맞냐는 정도의 차이다  
일단 할 수 있는 수준 까지는 외래키를 설정해두는 게 맞는 것 같다.  
  
<br>  

# 그래서 어쩜? - 모름  
  
이론은 무조건 외래키 설정이 맞다  
근데 실무적에는 외래키 해제하는 경우가 많다고 한다.    

왜? 좋은 구조와 개발 속도 간의 트레이드 오프 관계 때문.  
   
예를 들어   
아키텍쳐, 중요하다. 클린코드, 중요하다.   
   
근데 완벽한 아키텍쳐, 완벽한 클린코드만 따지면서 개발할 수 없는 노릇이다.  
반대로 개판난 아키텍쳐, 스파게티 코드로 개발할 수도 없다.   

그러므로 실무에서  
"이 구조를 유지하면 좋겠지만, 현실적으로는 너무 번거로워" 라고 판단된다면  
그 구조를 버리고 실리를 챙기는 쪽이 맞을수도 있다는 것.  
  
근데 나는 실무를 모르잖아?  
그럼 그냥 이론따라 정석대로 일단하자. 
정석대로 하다가 "아 이게 정석대로 하니까 여기가 어렵네" 라고 판단되는 부분이 생기면   
그때 가서 외래키 해제할까 말까를 생각하는 게 맞다.  

<br>  
  
### 정석 -> 어려움 겪음 -> 편법 고민  
  
이게 맞다.  
