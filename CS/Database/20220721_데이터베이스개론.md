# Chapter 2. DB 관리 시스템 (DBMS)

# 1) DBMS 등장 배경

태초에는 File System으로 다 해결했지만, 아래와 같은 단점들이 문제가 됐다  

## File System Database 문제점
1. 데이터가 여러 파일에 중복으로 저장된다  
2. App이 Data FIle에 종속적여진다  
3. 데이터 파일의 동시공유, 보안, 회복 기능이 부족
4. 결국 프로그램 개발이 어려워짐


## 1. 데이터가 여러 파일에 중복으로 저장된다  
1. 데이터 저장공간 낭비  
2. 데이터 일관성(Data Consistency) 유지가 어렵다
3. 데이터 무결성(Data Integrity) 유지가 어렵다  

### 1. 데이터 저장공간 낭비 
> 예를 들어 A.고객관리 B.주문관리 2가지 프로그램이 있다고 하자    
> 그러면   
> A. 고객관리  
> |ID|Name|연락처|주소|...|  
> |---|---|---|---|---|  
> |...|...|...|...|...|  
> B. 주문관리  
> |주문번호|ID|Name|연락처|주소|제품번호|수량|...|  
> |---|---|---|---|---|---|---|---|  
> |...|...|...|...|...|...|...|...|  
> 이렇게 ID Name 연락처 주소가 각기 다른 곳에 중복으로 저장되게 된다    
> 이러면 저장 공간도 문제가 되고   
> 이어서 뒤에 말할 데이터 일관성과 무결성 유지에도 어려움이 따른다.  

### 2. 데이터 일관성(Data Consistency) 유지 어려움
파일마다 고객 데이터가 똑같게 유지되기 어렵다  
예를 들어 고객관리에서 고객 연락처가 수정됐는데  
이걸 주문관리 한군데만 같이 수정하면 된다면 쉽겠지만  
100군데 1000군데로 분산된다면 누락이나 검증 과정에서 문제가 발생한다  

### 3. 데이터 무결성(Data Integrity) 유지 어려움  
각 데이터마다 제약 조건을 달기가 어려워 진다  
예를 들어 아이디는 최대 10자라는 제약이 있다 할 때  
File System 자체에서 이를 제한할 수 없기 때문에  
데이터 입력 과정에서 항상 이를 검증해줘야하는데  
이런 검증이 누락된 곳이 한군데서 생기고  
그게 또 일관성 유지를 위한 코드때문에 다른곳에 다 동기화 되어 퍼져나가면  
결국 10자 제한이 뚫리는 문제가 발생할 수 있다  
이러한 이유에 따라서 데이터 무결성 유지가 어렵다  
  
<br><br><br>  

## 2. App이 Data FIle에 종속적여진다  
  
파일 구조가 바뀌면 APP의 로직도 바뀌어야 한다   
예를 들어 어떤 데이터가 상품, 고객이름 만 되어있었는데   
이게 상품, 고객이름, 연락처 로 바뀌게 되면  
App의 코드도 바뀌어야 한다 (추가된 연락처와 무관하더라도, 연락처에 대한 처리가 필요하다)  
  
물론 R-DBMS를 모방해서 이런게 문제되지 않도록 코딩할 수 있겠지만  
역시나 이렇게되면 4번 단점이 뒤따르게 된다.  
    
<br><br><br>   
  
## 3. 데이터 파일의 동시공유, 보안, 회복 기능이 부족
  
데이터 베이스에서 중요한 부분중 하나가   
하나의 데이터 베이스에 많은 요청이 들어와도 이를 잘 처리해낼 수 있어야 한다는 점이다  
근데 파일 시스템은 동시에 사용할 수 없을수도 있고,  
동시에 처리하면 동시성 문제(파일을 읽던중 누군가 수정해서 문제가 발생하는 것)도  
생길 수 있다  
  
이외에도 보안이나 데이터 손상시 회복 기능등이 파일 시스템 자체에는 없기 때문에   
데이터 안전 차원에서 부족한 부분들이 있다.  
  
<br><br><br> 

## 4. 결국 프로그램 개발이 어려워짐
  
앞선 단점들을 다 일일이 코딩으로 극복할수야 있겠지만  
결국은 이렇게 되면 프로그램 개발이 어려워진다   
  
<br>
  
### 그래서 전문 DBMS가 등장하게 된다.  
  
<br><br><br>

# 2) DBMS의 정의  
DBMS의 주요 기능
1. 정의 기능 : DB 구조 정의 & 수정
2. 조작 기능 : CRUD 기능
3. 제어 기능 : DB를 정확 & 안전하게 유지
    
<br><br><br>

# 3) DBMS의 장단점

### 장점
1. 중복 통제
2. 독립성 확보(중복문제)
3. 동시공유
4. 보안
5. 무결성 유지
6. 표준화(접근법, Data 형식, 구조 등)
7. 장애 발생시 회복 가능
8. 개발 부담 줄어듬

### 단점  
1. 비용이 증가 (DBMS 별도 구매 및 컴퓨터 자원도 필요)
2. 백업이나 회복 방법이 복잡함
3. 중앙 집중으로 인해 DB 다운시 업무가 마비됨  
    
<br><br><br>

# 4) DBMS 발전 과정  
  
## 1️⃣세대 : 네트워크 / 계층 DBMS 
  
최초에 등장한 DBMS는 트리 방식으로 데이터베이스를 구현했었다  
이건 추측인데 아마도 트리 방식이 가장 기본적인 자료구조이기 때문이 아닐까 싶다  
하지만 당연히 트리 방식으로 DB를 구현하기에는  
모든 데이터가 트리 방식으로 연결되기 어렵다  
이에 따라서  
아래와 같은 단점을 지닌다  

### 단점들  
1. 갈수록 구조가 복잡해진다  
2. 수정이 어렵다  
3. 트리 구조와 데이터간 괴리가 있다 (트리 구조는 부모 자식 구조를 갖는데, 모든 데이터들이 이렇게 부모 자식으로 구분하기에는 안맞는 부분들이 있다)  
  
<br><br><br>
  
## 2️⃣세대 : 관계형 DBMS (Relational DBMS ; R-DBMS)
테이블 형태로 데이터베이스를 구성하고  
SQL(Structured Query Language) 문법을 사용해서 이 테이블에서 데이터를 CRUD 한다.  
  
### 장점 
이해하기 쉬운 테이블 구조 -> 단순하고 이해가 쉽기에 널리 쓰이게 됐다  
  
<br><br><br>

## 3️⃣세대 : 객체지향 / 객체관계 DBMS  
객체 지향 프로그래밍에서 등장한 객체라는 개념을 DB에 도입한 것이다.  

### 등장이유
더 다양하고 복잡한 응용 데이터를 다루려는 요구에 따라 등장하게 됐다  
  
객체형 DBMS의 장점으로는  
더 복잡한 데이터에 대한 분석과 처리도 지원한다는 점이 있다.   
  
### 그치만 R-DBMS가 대세인 이유
객체형 DBMS가 이렇게 복잡한 데이터 처리에 유용하다는 장점이 있지만  
그래도 여전히 단순한 정형 데이터들만을 다루는 경우가 많기 때문에  
굳이 객체형 DBMS를 쓸 필요가 없기 때문이다.  
또한 R-DBMS가 비교적 더 단순하므로   
기존에 쓰던 R-DBMS를 그대로 쓰는 기조가 유지된 것이다.  
  
<br><br><br>

## 4️⃣세대 그리고 이후 : No SQL / New SQL  
기존에 R-DBMS가 건재했지만, 최근에 들어 No SQL 사용 추세가 증가했다  

### No SQL의 필요성  
1. SNS 발달로 비정형 데이터 증가
2. 하드웨어 성능 향상만으로는 무수한 R-DBMS 요청 처리에 한계  


### 1. 비정형 데이터 증가  
먼저 정형 데이터 / 비정형 데이터가 뭔가 하면  
정형 데이터는 문자열(String)이나 숫자(int) 같은  
우리가 딱 프로그래밍에서 쓰는 그런 타입들을 말한다.    
  
반대로 비정형 데이터는  
좀 더 나아가서 이미지나 동영상 또는 검색 로그같이 임의로 사용자가 정의한 타입까지  
정형 데이터를 벗어난 것들을 말한다.  
  
SNS 사용 증가로 당연히 사진이나 동영상 같은 비정형 데이터들이 증가했는데,  
R-DBMS에서는 이런 비정형 데이터를 직접 저장해서 다룰 수 없었다.  
따라서 비정형 데이터를 DB에 직접 넣어서 다루는 것에 대한 요구가 증가했다.  

<br>  

### 2. 하드웨어 향상만으론 한계  
앞서 말했듯, SNS발달로 사용자도 많아졌고  
당연히 DB 요청량도 많아지면서  
DBMS가 올라가있는 컴퓨터도 성능이 향상되어야 한다  
근데 기존의 R-DBMS는 따로 분산처리가 어려워서  
하나의 컴퓨터에다가 계속 CPU를 덧붙이고 메모리를 또 덧붙이고 하는 식으로  
하나의 컴퓨터의 성능을 향상시켰어야 했다   
  
그런데 동시에   
클라우드 컴퓨팅 기술의 발달로  
굳이 하나의 컴퓨터를 거대하게 만들 필요가 없어지게 된 것이다.  
  
근데 R-DBMS는 이런 클라우드 컴퓨팅에 적합하지 않았다.  
  
<br>   
  
### 3. 빅데이터 개념 등장  
앞서 말했듯 SNS에서 수많은 비정형 데이터 발생과 함께  
빅데이터 개념이 등장하면서  
거대해진 데이터를 처리하기에 적합한 형태의 DB가 필요했다  
근데 R-DBMS에서는 이러한 빅데이터 처리에 딱히 적당하지 않았다.  
뇌피셜로 생각해보자면 아마도 큰 데이터를 테이블 안에 욱여넣어서 조회하기에는 적절하지 않았던 것 같다.  
  
<br><br><br>  
  
### NoSQL의 등장 
이에 따라서 R-DBMS가 주는 안정성/일관성을 포기하고  
NoSQL이 등장하게 된다.  
  
### NoSQL의 장점  
a. 비정형 데이터 저장 및 처리에 적합   
b. 확장성이 뛰어나서 클라우드 컴퓨팅을 도입해서 DBMS의 연산을 처리하기에 적합  
  
  <br>
  
### 또 다른 New SQL  
R-DBMS의 안정성/일관성과   
NoSQL의 확장성/유연성을 모두 지원하는  
새로운 방식의 SQL을 New SQL이라고 한다  
단 아직 기술 초기단계이기때문에 무조건적으로 New SQL로 가기에는 시기상조라고 볼 수 있겠지만  
향후 New SQL이 더 발전할 수 있다는 기대가 있다.
  
  
<br><br><br><br><br>
  
---   
  
# Chapter 9 정규화  
  
DB 설계를 신중하게 방법까지 알아가면서 하는 이유가 뭐겠는가.  
당연히 잘못 설계하면 문제가 발생하기 때문이다.  
  
### 어떤 문제가 발생할 수 있을까?  
일단 기본적인 설계 요구사항을 충족하지 못하는건 논외로 하자.  
게시판 구현하는데 게시글 제목 테이블을 안만든다던가 하는건   
애초에 요구사항 자체를 제대로 분석하지 못한 것이기 때문이다.  
  
### 그럼 어떤 문제에 대해서 논할까??  
데이터베이스를 잘못 설계하면, 이상현상이 발생한다.   
이상현상이란 그냥 단순히 데이터 하나를 바꾸는데 불필요한 검증 또는 통일성 유지를 위한 작업이 추가로 필요하게 되는 것을 말한다.   
  
예를 들어 단순히 글 내용만 수정하려고 하는데  
이 릴레이션을 건드리고 저 릴레이션 건드리고  
또 두 릴레이션에서 글 내용이 동일한지 확인하고 등등  
데이터 다루는데 추가작업이 주렁주렁 이어지는 일이 발생한다.  
  
### 이상현상을 막는 방법  
DB를 잘못 설계한다 -> 이상현상이 발생한다  
그렇다면 이제  
1. 이상현상이 발생하는 설계가 뭔지 알고    
2. 이상현상을 막는 설계를 하면   
된다.  
    



