[생활코딩 WEB2-Node.js 유튜브 강의](https://www.youtube.com/playlist?list=PLuHgQVnccGMA9QQX5wqj6ThK7t2tsGxjm)


3.1 설치
======
# nodejs 설치과정 , cmd에서 node js 파일 실행해봄


helloworld.js 파일 생성 후 아래 입력
```
console.log(1+1)
```

cmd에서 helloworld.js 파일 경로로 이동후 실행
```
C:\...> node helloworld.js
> 2
```

5.Node.js 웹서버
=========
강의에서 제공하는 소스코드로 main.js 만들고
cmd에서 
```
node main.js
```
입력하고, localhost:3000 으로 웹페이지 입장.

cmd에서 Ctrl + c 로 웹서버 종료

소스코드에 아래 부분 추가
```
    ...
    response.writeHead(200);
    console.log(__dirname + url);
    response.end(fs.readFileSync(__dirname + url));
    ...
```
이렇게 하고 다시 웹서버 켜고 cmd 보면, 페이지 들어 갈 때마다 어떤 파일로 접근하는지 메세지가 뜸


```
    response.end(fs.readFileSync(__dirname + url));
```
response.end() 안에 어떤 코드를 넣느냐에 따라서 
사용자에게 전송하는 정보가 바뀐다

```
    response.end('Physicks web ' + url);
```
같은식으로 바꿀 수 있다.
    

6,7. Javascript 기본 문법
===
그냥 덧셈 곱셈, 변수, console.log(변수), string 등 기본적인 문법

8.Literal
===
JS만의 특수한 문법

예를들어

```
    var Someone = 'Park';
    var MyName = 'Physicks';
    var str = 'Hello ' + Someone + '\n I am ' + MyName;

>   Hello Park
     I am Physicks
```

이렇게 할 수 있지만, 중간에 + 넣고 ' 다시 쳐주고 하는게 귀찮아진다
또 개행도 \n 넣어야 하고 귀찮다.

이걸 Literal을 이용하면

```
    var str = `Hello ${Someone} 
                I am ${MyName}`;
```
이렇게 가독성도 훨씬 좋고, 타이핑도 쉽게 할 수 있다.
또 ${} 안에 다양한 식도 넣을 수 있다.

유의할점은 
작은 따옴표(')가 아니라 숫자 1 옆에 있는 ` 이다.


9.URL의 이해
===

![image](https://user-images.githubusercontent.com/101965836/159617383-a1ca71f5-bb74-4b45-81f9-35b68df953ea.png)

# port
포트는 예제 코드에서
```
app.listen(3000);
```
방식으로 3000번 포트로 지정했기 때문에
**localhost:3000** 으로 접속하게 된다

# path 
컴퓨터 안에 어떤 파일인지 지정함

# query string 
쿼리 스트링 값을 변경하면 웹서버에 데이터를 전달할 수 있다
쿼리 스트링은 ?로 시작하기로 약속
값과 값은 &
값과 이름은 = 쓰기로 약속


10.URL통해서 입력된 값 사용하기
===
쿼리 스트링에 따라 다른 정보를 보여주는 것을 앞으로 할 것이다

그러면 그 전에
클라이언트가 URL 끝에 쿼리스트링 붙인 주소로 접속하면,
서버로는 어떤 요청이 전달될까?

이걸 알아보기 위해서
console.log() 이용해서 queryData를 출력하도록 해보자


먼저
```
...
var app = http.createServer(function(request,response){
    var _url = request.url;
    console.log(_url);
    ...
```
을 추가하고, 코드 저장하고 나서  
cmd에 프로젝트 폴더 들어가서 node main.js 실행하고  
웹페이지 열어서 htt<area>p://localhost:3000/?id=HTML 처럼 뒤에 쿼리스트링 추가해서 접근하도록 해보자.  

그러면  
cmd상에서 다음과 같은 메세지가 나온다  

![image](https://user-images.githubusercontent.com/101965836/159620993-6a7c2b5d-1bc9-4af4-b6f4-510f90403d1a.png)

***/?id=HTML***  
이라는 메세지를 볼 수 있다  
  
즉  
request.url은  
앞에 주소+포트인 localhost:3000을 제외한  
/... 내용이 들어온다.  

---

자 그러면    
위의 _url 값을 추출함을 통해서  
원하는 데이터를 얻어보다  

parse : url을 분석한다 는 뜻  

nodejs url parse query string 검색  
[참고한 글](https://stackoverflow.com/questions/8590042/parsing-query-string-in-node-js)  
코드에 다음과 같은 내용을 추가했다  

```
...
var url = require('url');

var app = http.createServer(function(request,response){
    ...
    var queryData = url.parse(_url, true).query;
    console.log(queryData);
    ...
    response.end(fs.readFileSync(__dirname + _url));
});
...
```
  
- ### 아직 잘 모르겠지만, url.parse(...)는 다음과 같은 뜻이라 한다  
`
url.parse(String, (boolean), (boolean))는 파싱될 주소 URLString을 첫 번째 인자로 받고, 그 다음에는 parseQueryString이라고 하는 매개 변수를 받아서 URL object를 반환합니다.
`  
  
   
아무튼 코드 저장하고 나서  
cmd에 프로젝트 폴더 들어가서 node main.js 실행하고  
웹페이지 열어서 htt<area>p://localhost:3000/?id=HTML 처럼 뒤에 쿼리스트링 추가해서 접근하도록 해보자.  
  
  
![image](https://user-images.githubusercontent.com/101965836/159623577-9190945d-76de-4fc6-8bca-d076bc967f13.png)
  
그러면 console.log(queryData)로 queryData가 어떤식인지 볼 수 있고  
주목할 부분은 뒤에 { id: 'HTML' } 이다.
이건 쿼리데이터에 담겨있는 객체 라는 뜻인데 객체는 나중에 알아본다.  
  
다시  
```
    console.log(queryData.id)
```
로 .id를 추가하면  
  
![image](https://user-images.githubusercontent.com/101965836/159624090-2dd8232e-1d1f-4263-8eee-e515fad25fa7.png)
  
  
id만 딱 뜬다.

이번 강의를 통해서 쿼리 스트링을 어떻게 얻어내는지 알아냈다.  
여기다가 덧붙여서  
```
    response.end(fs.readFileSync(__dirname + _url));
```
이 부분을
```
    response.end(fs.readFileSync(queryData.id);
```
라고 수정 하고,  
다시 node main.js 켜고  
htt<area>p://localhost:3000/?id=HTML  
로 접속해보자  
  
그러면 아래 이미지와 같이 뜬다.

![image](https://user-images.githubusercontent.com/101965836/159624437-2d0c8490-1552-46ba-93d7-3b4ab3c28d08.png)
  
즉 response.end(...) 내용은  
클라이언트에게 어떤 메세지를 보여줄지 나타내는 코드고  
기존에는 
```
    response.end(fs.readFileSync(__dirname + _url));
```
라고 적혀있었으니, 이건 대충 url에 따라서 어떤 파일을 보여줄거다(ex. 1.html 파일 보여줄거다)  
라는 식으로 동작했던 것임을 알 수 있다.  
  
    
바꾼 response.end()는  
쿼리스트링의 id만 떡하니 출력 해주는거니까  
저렇게 /?id=HTML 로 접속하게 되면  
HTML만 뜨게 되는거고  

앞으로는 이제  
쿼리스트링에 따라서 판단하고 적절한 HTML 문서를 보여주는 형식으로 공부해 나갈 것 같다  
  
    
      
      
11.쿼리스트링에 따라 완성된 웹페이지 출력
===
